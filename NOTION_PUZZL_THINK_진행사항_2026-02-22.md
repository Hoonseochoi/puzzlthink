# PUZZL THINK · 웹 크라임씬 진행사항 (2026-02-22)

> **오늘 웹 크라임씬(회장실 욕실)을 처음부터 구축한 내용을 정리한 문서입니다.**

---

## 1. 개요

- **대상**: 블루문 저택 이스케이프 룸 — **회장실 욕실** 크라임씬
- **범위**: 욕실 배경 이미지 위에 단서 핫스팟 배치, 탐정 메시지, 단서 추가/삭제 및 UI 동작
- **진행**: 당일 처음 구현 → 탐정 메시지·단서·핫스팟 위치·표시 방식까지 적용 완료

---

## 2. 처음 구현한 내용 (웹 크라임씬 기본)

### 2.1 탐정 메시지

- **회장실 욕실**에 **처음 진입했을 때**만 아래 문구 표시  
  - *"칼에 찔린 채 사망이라,, 단서가 될 만한 것들을 찾아보자"*
- `EscapeRoomClient.tsx`에서 `currentRoomId === 'chairman_bath'`일 때 `detectiveMessageBath` 사용
- 한/영 메시지: `ko.json` / `en.json`에 `detectiveMessageBath` 추가

### 2.2 단서 구성

| 구분 | 내용 |
|------|------|
| **추가** | **편지칼** — 가슴 부근에 핫스팟, 설명: *"살해도구로 쓰인 것 같은 편지칼이다. 누구의 것인지 찾아봐야겠다."* |
| **삭제** | **변기 하수구** 단서 및 관련 질문(q7) 제거 |
| **유지** | **손목시계** — 욕조 가장자리 팔목 위치에 핫스팟 (기존 단서) |

- 데이터: `blue-moon.ts` / `blue-moon-en.ts`의 `clues`, `questions` 반영

### 2.3 단서 핫스팟 위치 (최종)

- **손목시계**: `left: 60`, `top: 72` (화면 기준 오른쪽 아래, 욕조 팔목 쪽)
- **편지칼**: `left: 62`, `top: 11` (가슴/칼 위치)

Y값은 비슷하게 유지하고, X값과 칼은 “위로 10, 오른쪽 2” 등 요청에 맞춰 조정한 뒤 위 값으로 확정.

---

## 3. UI/동작 정리

### 3.1 단서 표시 방식

- **찾기 전**: 영역·돋보기 **전부 비표시** (투명 클릭 영역만 존재)
- **클릭한 후**: 해당 단서만 **체크 아이콘**으로 표시
- 구현: `RoomView.tsx` — 미발견 시 `border-0 bg-transparent`, 발견 시에만 체크 아이콘 렌더

### 3.2 핫스팟이 화면 상단에 몰리던 문제

- **원인**: 핫스팟을 감싼 div가 높이를 제대로 못 받아, `top: 72%` 등이 적용되지 않고 위로 몰림
- **조치**:  
  - 핫스팟 컨테이너에 `absolute inset-0` 적용 → 방 이미지와 동일한 영역 사용  
  - 퍼센트(`left`/`top`/`width`/`height`)가 의도한 위치에 적용되도록 수정

### 3.3 클릭이 안 되던 문제

- **원인**: 방 이미지 위 어두운 오버레이(`bg-black/30`)가 클릭을 가로챔
- **조치**: 오버레이에 `pointer-events-none` 적용 → 클릭이 항상 핫스팟 버튼으로 전달

---

## 4. 수정/추가된 파일 요약

| 파일 | 변경 요약 |
|------|------------|
| `EscapeRoomClient.tsx` | 회장실 욕실일 때 `detectiveMessageBath` 분기 추가 |
| `RoomView.tsx` | 핫스팟 컨테이너 `absolute inset-0`, 오버레이 `pointer-events-none`, 미발견 시 비표시·발견 시 체크만 표시 |
| `blue-moon.ts` | 편지칼 단서 추가, 변기 하수구·q7 제거, 손목시계/편지칼 `hotspotPosition` 조정 |
| `blue-moon-en.ts` | 위와 동일 내용 영문 데이터 반영 |
| `ko.json` / `en.json` | `detectiveMessageBath` 추가 |
| `escape.ts` (types) | 필요 시 `Clue` 등 타입 정리 (이번에 사용한 필드 기준) |

---

## 5. 현재 상태

- 회장실 욕실: **첫 진입 시 탐정 메시지** 표시
- **편지칼**·**손목시계** 두 개 단서만 노출, 변기 하수구 관련 내용 제거
- 핫스팟 위치는 위 최종값으로 고정, **찾기 전에는 안 보이고 클릭 후 체크만 표시**
- RoomView 쪽 레이아웃/클릭 처리로 인한 이슈는 위 조치로 해소된 상태

---

## 6. 참고

- 노션 페이지: [PUZZL THINK](https://www.notion.so/PUZZL-THINK-30e806b8a732805da5a2c68452c8b8d7?source=copy_link)
- 작성일: 2026-02-22
